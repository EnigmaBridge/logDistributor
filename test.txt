# send logs from log server to distributor running locally
ssh -R 8998:localhost:8998 eblog-server
ssh -L 8001:localhost:8000 -L 8088:localhost:8088 eblog-client

# Set the clients - old ones with given client ID will be removed
curl  --insecure -H "Content-Type:application/json" -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/client/add' -d '{"clients":[{"clientId":"API_TEST", "splunkConfig": {"endpoint":"tcp://127.0.0.1:4000", "token": "abc", "caRoots": "---pem---", "verifyTls":true}, "objects":[{"apiKey":"API_TEST","uoType":12,"uoId":123},{"apiKey":"API_TEST","uoType":12,"uoId":321}]}]}'

# Configuration from business server
curl  --insecure -H "Content-Type:application/json" -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/client/business/configure' -d '{"clients":[{"clientid":"TEST","enabled":2,"clientapis":{"API_TEST":{"apikey":"API_TEST","use":[1152,1153,21896,21913,21930,30634,4660,30651,21828,21829,30668,30292,21845,34901,13398,30685,1120,1121,1122,1123,1124,1125,21862,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,39030,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151],"enabled":2,"manage":[]}}}]}'

# dump current database
curl  --insecure -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/client/list'

# reload current settings - lazy, connectors reload only if config changes
curl  --insecure -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/reload'

# reload current settings - eager. Reconnect.
curl  --insecure -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/reload?lazy=false'

# add UO to existing user
curl  --insecure -H "Content-Type:application/json" -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/client/addObject/API_TEST' -d '{"apiKey":"API_TEST","uoType":12,"uoId":321}'

# add UO automatically
curl  --insecure -H "Content-Type:application/json" -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/client/addObject' -d '{"apiKey":"API_TEST","uoType":12,"uoId":321}'

# removing UO from existing user
curl  --insecure -H "Content-Type:application/json" -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/client/removeObject/API_TEST' -d '{"apiKey":"API_TEST","uoType":12,"uoId":321}'

# update stat configuration
curl  --insecure -H "Content-Type:application/json" -H 'X-Auth-Token: a' 'https://localhost:8443/api/v1/client/config/API_TEST' -d '{"splunkConfig": {"endpoint":"https://127.0.0.1:8088", "token": "4FBE1D2F-354D-4947-BA1F-3629CB5F04AF", "caRoots": "", "verifyTls":false}}'


